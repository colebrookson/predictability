aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
ggthemes::theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^{-2})") +
theme(
axis.title.y = element_markdown()
)
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
ggthemes::theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
)
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
ggthemes::theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 275))
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
ggthemes::theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
library(readr)
library(here)
library(tidyr)
library(ggplot2)
library(magrittr)
library(ggtext)
# going to go through the process once iwth one of the datasets, so for now I'll
# just ues terrestrial-daily, for no particular reason
terr_day <- readr::read_csv(
here::here("./data/efi-neon-data/terrestrial-daily.csv")
)
# going to go through the process once iwth one of the datasets, so for now I'll
# just ues terrestrial-daily, for no particular reason
terr_day <- readr::read_csv(
here::here("./data/efi-neon-data/terrerstrial-daily.csv")
)
names(terr_day)
unique(terr_day$variable)
# currently in long format, so going to pivot to a wide format
terr_day_wide <- tidyr::pivot_wider(
data = terr_day,
names_from = variable,
values_from = observation
)
# look at the mean values per datetime ob
avg_terr_day = terr_day %>%
dplyr::group_by(datetime, variable) %>%
dplyr::summarize(mean_obs = mean(observation, na.rm = TRUE))
# plot the variable of interest through time
ggplot2::ggplot(data = terr_day) +
geom_point(aes(x = datetime, y = observation, fill = variable),
shape = 21, alpha = 0.02) +
geom_line(data = avg_terr_day,
aes(x = datetime, y = mean_obs, colour = variable)) +
ggthemes::theme_base()
# let's just do one plot at a time so we can see what's going on
le_day <- terr_day %>%
dplyr::filter(variable == "le") %>%
dplyr::mutate(le = observation) %>%
dplyr::select(-variable)
le_avg_day <- le_day %>%
dplyr::group_by(datetime) %>%
dplyr::summarize(mean_le = mean(le, na.rm = TRUE))
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
source("~/Github/predictability/R/functions_global.R", echo=TRUE)
names(terr_day)
unique(terr_day$variable)
# currently in long format, so going to pivot to a wide format
terr_day_wide <- tidyr::pivot_wider(
data = terr_day,
names_from = variable,
values_from = observation
)
# look at the mean values per datetime ob
avg_terr_day = terr_day %>%
dplyr::group_by(datetime, variable) %>%
dplyr::summarize(mean_obs = mean(observation, na.rm = TRUE))
# plot the variable of interest through time
ggplot2::ggplot(data = terr_day) +
geom_point(aes(x = datetime, y = observation, fill = variable),
shape = 21, alpha = 0.02) +
geom_line(data = avg_terr_day,
aes(x = datetime, y = mean_obs, colour = variable)) +
ggthemes::theme_base()
# let's just do one plot at a time so we can see what's going on
le_day <- terr_day %>%
dplyr::filter(variable == "le") %>%
dplyr::mutate(le = observation) %>%
dplyr::select(-variable)
le_avg_day <- le_day %>%
dplyr::group_by(datetime) %>%
dplyr::summarize(mean_le = mean(le, na.rm = TRUE))
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
#' Theme Base
#'
#' Theme similar to the default settings of the \sQuote{base} R graphics.
#'
#' @inheritParams ggplot2::theme_bw
#' @export
#' @family themes
#' @example inst/examples/ex-theme_base.R
theme_base <- function(base_size = 16, base_family = "") {
theme_foundation() +
theme(line = element_line(colour = "black",
lineend = "round",
linetype = "solid"),
rect = element_rect(fill = "white",
colour = "black",
linetype = "solid"),
text = element_text(colour = "black",
face = "plain",
family = base_family,
size = base_size,
vjust = 0.5,
hjust = 0.5,
lineheight = 1),
panel.grid = element_blank(),
strip.background = element_rect(colour = NA),
legend.key = element_rect(colour = NA),
title = element_text(size = rel(1)),
plot.title = element_text(size = rel(1.2), face = "bold"),
strip.text = element_text(),
axis.ticks.length = unit(0.5, "lines")
)
# TODO: get margins right
}
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
source("~/Github/predictability/R/functions_global.R", echo=TRUE)
# plot the variable of interest through time
ggplot2::ggplot(data = terr_day) +
geom_point(aes(x = datetime, y = observation, fill = variable),
shape = 21, alpha = 0.02) +
geom_line(data = avg_terr_day,
aes(x = datetime, y = mean_obs, colour = variable)) +
theme_base()
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
thm + theme(panel.border = element_rect(fill = NA, colour = "white"),
legend.background = element_rect(colour = NA),
line = element_line(colour = "black"),
rect = element_rect(fill = "white", colour = "black"),
text = element_text(colour = "black"))
#' \code{colour} and \code{fill} values to \code{NULL}, except for the top-level
#' elements (\code{line}, \code{rect}, and \code{title}), which have
#' \code{colour = "black"}, and \code{fill = "white"}. This leaves the spacing
#' and-non colour defaults of the default \pkg{ggplot2} themes in place.
#'
#' @inheritParams ggplot2::theme_grey
#'
#' @family themes
#' @export
#' @importFrom ggplot2 theme_grey
theme_foundation <- function(base_size=12, base_family="") {
thm <- theme_grey(base_size = base_size, base_family = base_family)
for (i in names(thm)) {
if ("colour" %in% names(thm[[i]])) {
thm[[i]]["colour"] <- list(NULL)
}
if ("fill" %in% names(thm[[i]])) {
thm[[i]]["fill"] <- list(NULL)
}
}
thm + theme(panel.border = element_rect(fill = NA, colour = "white"),
legend.background = element_rect(colour = NA),
line = element_line(colour = "black"),
rect = element_rect(fill = "white", colour = "black"),
text = element_text(colour = "black"))
}
#' Theme Base
#'
#' Theme similar to the default settings of the \sQuote{base} R graphics.
#'
#' @inheritParams ggplot2::theme_bw
#' @export
#' @family themes
#' @example inst/examples/ex-theme_base.R
theme_base <- function(base_size = 16, base_family = "") {
theme_foundation() +
theme(line = element_line(colour = "black",
lineend = "round",
linetype = "solid"),
rect = element_rect(fill = "white",
colour = "black",
linetype = "solid"),
text = element_text(colour = "black",
face = "plain",
family = base_family,
size = base_size,
vjust = 0.5,
hjust = 0.5,
lineheight = 1),
panel.grid = element_blank(),
strip.background = element_rect(colour = NA),
legend.key = element_rect(colour = NA),
title = element_text(size = rel(1)),
plot.title = element_text(size = rel(1.2), face = "bold"),
strip.text = element_text(),
axis.ticks.length = unit(0.5, "lines")
)
# TODO: get margins right
}
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
theme_foundation() +
theme(line = element_line(colour = "black",
lineend = "round",
linetype = "solid"),
rect = element_rect(fill = "white",
colour = "black",
linetype = "solid"),
text = element_text(colour = "black",
face = "plain",
family = base_family,
size = base_size,
vjust = 0.5,
hjust = 0.5,
lineheight = 1),
panel.grid = element_blank(),
strip.background = element_rect(colour = NA),
legend.key = element_rect(colour = NA),
title = element_text(size = rel(1)),
plot.title = element_text(size = rel(1.2), face = "bold"),
strip.text = element_text(),
axis.ticks.length = unit(0.5, "lines"),
# add my addition here
plot.background = element_rect(colour = "white")
)
#' Theme Base
#'
#' Theme similar to the default settings of the \sQuote{base} R graphics.
#'
#' @inheritParams ggplot2::theme_bw
#' @export
#' @family themes
#' @example inst/examples/ex-theme_base.R
theme_base <- function(base_size = 16, base_family = "") {
theme_foundation() +
theme(line = element_line(colour = "black",
lineend = "round",
linetype = "solid"),
rect = element_rect(fill = "white",
colour = "black",
linetype = "solid"),
text = element_text(colour = "black",
face = "plain",
family = base_family,
size = base_size,
vjust = 0.5,
hjust = 0.5,
lineheight = 1),
panel.grid = element_blank(),
strip.background = element_rect(colour = NA),
legend.key = element_rect(colour = NA),
title = element_text(size = rel(1)),
plot.title = element_text(size = rel(1.2), face = "bold"),
strip.text = element_text(),
axis.ticks.length = unit(0.5, "lines"),
# add my addition here
plot.background = element_rect(colour = "white")
)
# TODO: get margins right
}
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
#' \code{colour} and \code{fill} values to \code{NULL}, except for the top-level
#' elements (\code{line}, \code{rect}, and \code{title}), which have
#' \code{colour = "black"}, and \code{fill = "white"}. This leaves the spacing
#' and-non colour defaults of the default \pkg{ggplot2} themes in place.
#'
#' @inheritParams ggplot2::theme_grey
#'
#' @family themes
#' @export
#' @importFrom ggplot2 theme_grey
theme_foundation <- function(base_size=12, base_family="") {
thm <- theme_grey(base_size = base_size, base_family = base_family)
for (i in names(thm)) {
if ("colour" %in% names(thm[[i]])) {
thm[[i]]["colour"] <- list(NULL)
}
if ("fill" %in% names(thm[[i]])) {
thm[[i]]["fill"] <- list(NULL)
}
}
thm + theme(panel.border = element_rect(fill = NA),
legend.background = element_rect(colour = NA),
line = element_line(colour = "black"),
rect = element_rect(fill = "white", colour = "black"),
text = element_text(colour = "black"))
}
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
#' Theme Base
#'
#' Theme similar to the default settings of the \sQuote{base} R graphics.
#'
#' @inheritParams ggplot2::theme_bw
#' @export
#' @family themes
#' @example inst/examples/ex-theme_base.R
theme_base <- function(base_size = 16, base_family = "") {
theme_foundation() +
theme(line = element_line(colour = "black",
lineend = "round",
linetype = "solid"),
rect = element_rect(fill = "white",
colour = "black",
linetype = "solid"),
text = element_text(colour = "black",
face = "plain",
family = base_family,
size = base_size,
vjust = 0.5,
hjust = 0.5,
lineheight = 1),
panel.grid = element_blank(),
strip.background = element_rect(colour = NA),
legend.key = element_rect(colour = NA),
title = element_text(size = rel(1)),
plot.title = element_text(size = rel(1.2), face = "bold"),
strip.text = element_text(),
axis.ticks.length = unit(0.5, "lines"),
# add my addition here
plot.background = element_rect(colour = NA)
)
# TODO: get margins right
}
ggplot() +
geom_point(data = le_day,
aes(x = datetime, y = le),
shape = 21, alpha = 0.02, fill = "red") +
geom_line(data = le_avg_day,
aes(x = datetime, y = mean_le)) +
theme_base() +
labs(x = "Date", y = "Latent Heat Flux (W m^-2)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
nee_day <- terr_day %>%
dplyr::filter(variable == "nee") %>%
dplyr::mutate(nee = observation) %>%
dplyr::select(-variable)
nee_avg_day <- nee_day %>%
dplyr::group_by(datetime) %>%
dplyr::summarize(mean_nee = mean(nee, na.rm = TRUE))
ggplot() +
geom_point(data = nee_day,
aes(x = datetime, y = nee),
shape = 21, alpha = 0.02, fill = "blue") +
geom_line(data = nee_avg_day,
aes(x = datetime, y = mean_nee)) +
theme_base() +
labs(x = "Date", y = "Net ecosystem exchange (g C m^-2 day^-1)") +
theme(
axis.title.y = element_markdown()
) +
ylim(c(-10, 250))
ggplot() +
geom_point(data = nee_day,
aes(x = datetime, y = nee),
shape = 21, alpha = 0.02, fill = "blue") +
geom_line(data = nee_avg_day,
aes(x = datetime, y = mean_nee)) +
theme_base() +
labs(x = "Date", y = "Net ecosystem exchange (g C m^-2 day^-1)") +
theme(
axis.title.y = element_markdown()
) +
ggplot() +
geom_point(data = nee_day,
aes(x = datetime, y = nee),
shape = 21, alpha = 0.02, fill = "blue") +
geom_line(data = nee_avg_day,
aes(x = datetime, y = mean_nee)) +
theme_base() +
labs(x = "Date", y = "Net ecosystem exchange (g C m^-2 day^-1)") +
theme(
axis.title.y = element_markdown()
)
ggplot() +
geom_point(data = nee_day,
aes(x = datetime, y = nee),
shape = 21, alpha = 0.02, fill = "blue") +
geom_line(data = nee_avg_day,
aes(x = datetime, y = mean_nee)) +
theme_base() +
labs(x = "Date", y = "Net ecosystem exchange (g C m^-2 day^-1)") +
theme(
axis.title.y = element_markdown()
)
